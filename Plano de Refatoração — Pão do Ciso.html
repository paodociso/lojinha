<!DOCTYPE html>
<!-- saved from url=(0057)file:///C:/Users/Tarciso/Downloads/plano-refatoracao.html -->
<html lang="pt-br"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plano de Refatoração — Pão do Ciso</title>
    <link href="./Plano de Refatoração — Pão do Ciso_files/css2" rel="stylesheet">
    <style>
        :root {
            --verde: #2d3a27;
            --verde-claro: #3a5a24;
            --marrom: #2e2610;
            --bege: #fdf5e6;
            --bege-escuro: #f5f0e6;
            --borda: #dccbb0;
            --vermelho: #b22222;
            --vermelho-suave: #fff0f0;
            --amarelo: #c8960c;
            --amarelo-suave: #fffbf0;
            --azul: #1a3a5c;
            --azul-suave: #f0f4f8;
            --verde-suave: #f0f7ed;
            --cinza: #4a4a4a;
            --branco: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bege);
            color: var(--cinza);
            line-height: 1.7;
        }

        /* HEADER */
        header {
            background: var(--verde);
            color: var(--branco);
            padding: 50px 40px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            inset: 0;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 40px,
                rgba(255,255,255,0.02) 40px,
                rgba(255,255,255,0.02) 80px
            );
        }

        .header-tag {
            display: inline-block;
            background: rgba(255,255,255,0.15);
            border: 1px solid rgba(255,255,255,0.3);
            color: rgba(255,255,255,0.9);
            font-size: 0.7rem;
            font-weight: 700;
            letter-spacing: 3px;
            text-transform: uppercase;
            padding: 6px 16px;
            border-radius: 20px;
            margin-bottom: 20px;
        }

        header h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 5vw, 3.2rem);
            font-weight: 900;
            line-height: 1.1;
            margin-bottom: 12px;
            position: relative;
        }

        header p {
            font-size: 1rem;
            opacity: 0.8;
            max-width: 500px;
            margin: 0 auto;
            position: relative;
        }

        /* LEGENDA */
        .legenda {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            padding: 25px 40px;
            background: var(--bege-escuro);
            border-bottom: 1px solid var(--borda);
        }

        .legenda-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--cinza);
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .dot-critico { background: var(--vermelho); }
        .dot-importante { background: var(--amarelo); }
        .dot-melhoria { background: var(--azul); }
        .dot-limpeza { background: #888; }

        /* CONTAINER PRINCIPAL */
        main {
            max-width: 860px;
            margin: 0 auto;
            padding: 40px 20px 80px;
        }

        /* SEÇÃO */
        .secao {
            margin-bottom: 60px;
        }

        .secao-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--borda);
        }

        .secao-numero {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 900;
            color: var(--borda);
            line-height: 1;
            flex-shrink: 0;
        }

        .secao-titulo-wrap h2 {
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--marrom);
            line-height: 1.2;
        }

        .secao-titulo-wrap p {
            font-size: 0.85rem;
            color: var(--cinza);
            margin-top: 3px;
            opacity: 0.8;
        }

        /* CARD DE TAREFA */
        .card-tarefa {
            background: var(--branco);
            border-radius: 12px;
            border: 1px solid var(--borda);
            margin-bottom: 16px;
            overflow: hidden;
            transition: box-shadow 0.2s;
        }

        .card-tarefa:hover {
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .card-header {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 18px 20px;
        }

        .badge-prioridade {
            flex-shrink: 0;
            font-size: 0.65rem;
            font-weight: 800;
            letter-spacing: 1px;
            text-transform: uppercase;
            padding: 4px 10px;
            border-radius: 20px;
            margin-top: 2px;
        }

        .badge-critico {
            background: var(--vermelho-suave);
            color: var(--vermelho);
            border: 1px solid #f5c6c6;
        }

        .badge-importante {
            background: var(--amarelo-suave);
            color: var(--amarelo);
            border: 1px solid #f0dca0;
        }

        .badge-melhoria {
            background: var(--azul-suave);
            color: var(--azul);
            border: 1px solid #c0d0e0;
        }

        .badge-limpeza {
            background: #f5f5f5;
            color: #666;
            border: 1px solid #ddd;
        }

        .card-titulo-wrap {
            flex: 1;
        }

        .card-titulo {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--marrom);
            margin-bottom: 3px;
        }

        .card-arquivos {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 6px;
        }

        .arquivo-tag {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            background: var(--bege-escuro);
            color: var(--verde);
            padding: 2px 8px;
            border-radius: 4px;
            border: 1px solid var(--borda);
            font-weight: 600;
        }

        .card-body {
            padding: 0 20px 18px 20px;
            border-top: 1px solid var(--bege-escuro);
            margin-top: 0;
        }

        .card-descricao {
            font-size: 0.88rem;
            color: var(--cinza);
            line-height: 1.6;
            padding-top: 14px;
        }

        .card-acao {
            margin-top: 12px;
            padding: 10px 14px;
            background: var(--bege-escuro);
            border-radius: 8px;
            border-left: 3px solid var(--borda);
        }

        .card-acao-label {
            font-size: 0.65rem;
            font-weight: 800;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: var(--verde);
            margin-bottom: 5px;
        }

        .card-acao p {
            font-size: 0.83rem;
            color: var(--cinza);
            line-height: 1.5;
        }

        code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            background: rgba(0,0,0,0.06);
            padding: 1px 5px;
            border-radius: 3px;
            color: var(--verde);
            font-weight: 600;
        }

        /* AVISO FINAL */
        .aviso-final {
            background: var(--verde);
            color: var(--branco);
            border-radius: 14px;
            padding: 30px;
            margin-top: 50px;
            text-align: center;
        }

        .aviso-final h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .aviso-final p {
            font-size: 0.9rem;
            opacity: 0.85;
            max-width: 500px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* RODAPÉ */
        footer {
            text-align: center;
            padding: 30px;
            font-size: 0.8rem;
            color: #aaa;
            border-top: 1px solid var(--borda);
        }

        @media (max-width: 600px) {
            header { padding: 35px 20px 30px; }
            .legenda { padding: 20px; gap: 12px; }
            main { padding: 25px 15px 60px; }
            .card-header { flex-direction: column; gap: 8px; }
        }
    </style>
</head>
<body>

<header>
    <div class="header-tag">Análise de Código</div>
    <h1>Plano de Refatoração</h1>
    <p>Pão do Ciso — ordenado por prioridade, do mais urgente ao cosmético</p>
</header>

<div class="legenda">
    <div class="legenda-item"><div class="dot dot-critico"></div> Crítico — pode quebrar em produção</div>
    <div class="legenda-item"><div class="dot dot-importante"></div> Importante — risco financeiro ou de UX</div>
    <div class="legenda-item"><div class="dot dot-melhoria"></div> Melhoria — facilita manutenção futura</div>
    <div class="legenda-item"><div class="dot dot-limpeza"></div> Limpeza — cosmético, sem risco</div>
</div>

<main>

    <!-- FASE 1 -->
    <section class="secao">
        <div class="secao-header">
            <div class="secao-numero">01</div>
            <div class="secao-titulo-wrap">
                <h2>Bugs reais — corrija antes de qualquer outra coisa</h2>
                <p>Estes itens podem afetar o cliente ou o seu negócio agora</p>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-critico">Crítico</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Resolver guerra CSS vs JS no modal de recuperação</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">modal-recuperar-carrinho.css</span>
                        <span class="arquivo-tag">recuperacao-carrinho.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">O CSS força <code>display: none !important</code> e o JS usa <code>setProperty('display', 'flex', 'important')</code> para vencer. É uma guerra de especificidade ativa — qualquer edição descuidada em um dos lados quebra o modal sem nenhum erro visível.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Remova o <code>!important</code> do CSS. Deixe apenas <code>display: none</code> normal. No JS, substitua o <code>setProperty</code> por <code>modal.style.display = 'flex'</code> simples.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-critico">Crítico</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Corrigir parsing de hora no prazo da fornada</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">fornada.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao"><code>parseInt("23:59h")</code> retorna <code>23</code>, ignorando os minutos. O sistema trata o prazo como meia-noite em ponto, não 23:59. Pedidos podem ser aceitos ou bloqueados na hora errada.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Substitua o parsing simples por: <code>const [hora, min] = horaLimite.replace('h','').split(':').map(Number)</code> e use <code>dataLimiteComHora.setHours(hora, min || 0, 0, 0)</code>.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-critico">Crítico</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Verificar e corrigir o bug do PIX com Cloudflare</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">index.html</span>
                        <span class="arquivo-tag">pagamento.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">O Cloudflare está ofuscando <code>paodociso@gmail.com</code> no HTML, substituindo por um link codificado. A função de copiar a chave PIX provavelmente lê o elemento e pega o link, não o email — o cliente copia algo errado sem saber.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Em <code>pagamento.js</code>, a função <code>copiarChavePix()</code> já usa a string direta — isso está correto e imune ao Cloudflare. O problema é o que aparece visualmente para o cliente. Substitua o email no HTML por um elemento preenchido via JS: <code>document.getElementById('texto-chave-pix').textContent = window.config.chavePix</code>.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-critico">Crítico</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Remover funções duplicadas em fornada.js</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">fornada.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao"><code>desabilitarFornada()</code> e <code>habilitarFornada()</code> estão definidas duas vezes cada no mesmo arquivo. Hoje são idênticas, mas uma edição futura em apenas uma das cópias criará comportamento diferente do esperado sem nenhum aviso.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Simples: apague a segunda ocorrência de cada função. O arquivo tem as duas definidas em sequência — basta deletar o bloco repetido.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-critico">Crítico</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Corrigir typo no nome do bairro em dados.js</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">dados.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao"><code>"Parque dos Estado"</code> está com "s" faltando. A comparação com o retorno da API do ViaCEP é por string exata — clientes desse bairro recebem a taxa geral em vez da taxa correta.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Altere para <code>"Parque dos Estados"</code> no <code>dados.js</code>. Confirme também como o ViaCEP retorna o nome desse bairro para garantir correspondência exata.</p>
                </div>
            </div>
        </div>

    </section>

    <!-- FASE 2 -->
    <section class="secao">
        <div class="secao-header">
            <div class="secao-numero">02</div>
            <div class="secao-titulo-wrap">
                <h2>Riscos financeiros e de UX</h2>
                <p>Não quebram imediatamente, mas podem causar confusão ou erro de valor</p>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-importante">Importante</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Unificar as três fontes de verdade da taxa de entrega</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">cep-frete.js</span>
                        <span class="arquivo-tag">state.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">A taxa de entrega é gravada em três lugares: <code>enderecoCliente.taxaEntrega</code>, <code>window.taxaEntregaGlobal</code> e <code>estadoAplicativo.taxaEntrega</code>. Qualquer parte do código que leia a fonte errada mostra um valor divergente do real. É um bug financeiro silencioso.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Eleja <code>estadoAplicativo.taxaEntrega</code> como única fonte. Remova as atribuições a <code>enderecoCliente.taxaEntrega</code> e <code>window.taxaEntregaGlobal</code>. Substitua todas as leituras dessas variáveis pela leitura do estado.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-importante">Importante</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Unificar endereço do cliente em um único objeto</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">state.js</span>
                        <span class="arquivo-tag">cep-frete.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao"><code>window.enderecoCliente</code> e <code>estadoAplicativo.dadosCliente</code> guardam os mesmos campos de endereço. Dois objetos paralelos que se dessincronizam.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Mantenha apenas <code>estadoAplicativo.dadosCliente</code>. Migre todas as leituras e escritas de <code>window.enderecoCliente</code> para ele. Remova a declaração de <code>window.enderecoCliente</code> do <code>state.js</code>.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-importante">Importante</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Substituir todos os alert() nativos por mostrarNotificacao()</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">dados-cliente.js</span>
                        <span class="arquivo-tag">envio.js</span>
                        <span class="arquivo-tag">produto-modal.js</span>
                        <span class="arquivo-tag">opcionais.js</span>
                        <span class="arquivo-tag">pagamento.js</span>
                        <span class="arquivo-tag">carrinho.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">Há pelo menos 10 chamadas a <code>alert()</code> espalhadas pelo projeto. Além de quebrar a experiência visual (o alert nativo bloqueia a interface e tem aparência do sistema operacional), em alguns navegadores mobile ele pode ser suprimido por configuração do usuário.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Busque globalmente por <code>alert(</code> em todos os .js e substitua por <code>mostrarNotificacao(mensagem, 'error')</code>. A função já existe e aceita tipos — só precisa ser usada de forma consistente.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-importante">Importante</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Corrigir conflito de .barra-carrinho-fixa entre dois CSS</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">layout-base.css</span>
                        <span class="arquivo-tag">modal-carrinho.css</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">A classe <code>.barra-carrinho-fixa</code> está definida em dois arquivos com valores contraditórios: no <code>layout-base.css</code> ela é <code>position: fixed</code> e verde, no <code>modal-carrinho.css</code> ela vira <code>position: sticky</code> e branca. A segunda sobrescreve a primeira.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Remova a redefinição de <code>.barra-carrinho-fixa</code> do <code>modal-carrinho.css</code>. Se havia uma necessidade específica dentro do modal, use um seletor mais específico como <code>#modal-carrinho .barra-carrinho-fixa</code>.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-importante">Importante</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Corrigir conflito de .opcao-pagamento entre dois CSS</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">modal-carrinho.css</span>
                        <span class="arquivo-tag">modal-pagamento.css</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao"><code>.opcao-pagamento</code> e <code>.pix-chave</code> são definidas em ambos os arquivos com valores conflitantes. No desktop, o layout de pagamento alterna entre grid e flex de forma imprevisível dependendo da ordem de cascata.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Consolide toda a estilização de <code>.opcao-pagamento</code> em <code>modal-pagamento.css</code> e remova as definições redundantes de <code>modal-carrinho.css</code>.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-importante">Importante</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Corrigir o typo na variável de cor --marrim-detalhe</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">style.css</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">A variável está declarada como <code>--marrim-detalhe</code> (com i) mas referenciada em vários lugares como <code>--marrom-detalhe</code> (com o). Elementos que usam a variável errada herdam <code>transparent</code> silenciosamente — um bug visual difícil de rastrear.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>No <code>style.css</code>, renomeie <code>--marrim-detalhe</code> para <code>--marrom-detalhe</code>. Busque globalmente nos CSS para confirmar que não existem outras referências à versão errada.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-importante">Importante</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Adicionar validação de WhatsApp em dados-cliente.js</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">dados-cliente.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">O nome é validado (mínimo 3 caracteres) mas o telefone não. O cliente pode deixar o campo vazio ou digitar qualquer coisa e o pedido é enviado com WhatsApp inválido.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>A função <code>validarTelefone()</code> já existe em <code>utils.js</code> — basta chamá-la em <code>validarDadosCliente()</code> antes de prosseguir.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-importante">Importante</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Usar window.config para WhatsApp e PIX hardcoded</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">envio.js</span>
                        <span class="arquivo-tag">pagamento.js</span>
                        <span class="arquivo-tag">index.html</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">O número do WhatsApp e a URL do Google Apps Script aparecem hardcoded em <code>envio.js</code>. A chave PIX está hardcoded em <code>pagamento.js</code>. Já existe <code>window.config</code> para centralizar isso.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Adicione <code>urlPlanilha</code> ao <code>config.js</code>. Substitua as strings hardcoded por <code>window.config.whatsappVendedor</code>, <code>window.config.chavePix</code> e <code>window.config.urlPlanilha</code>.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-importante">Importante</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Corrigir descrições de placeholder nos cafés</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">dados.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">Capuccino e Café cremoso têm como descrição o texto <em>"Seja mais sóbrio, evite exclamações. acrescente as palavras-chave: praticidade e facilidade."</em> — um lembrete para você mesmo que ficou no lugar da descrição real. O cliente está vendo isso no modal do produto.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Substitua pelo texto real de descrição dos produtos no <code>dados.js</code>.</p>
                </div>
            </div>
        </div>

    </section>

    <!-- FASE 3 -->
    <section class="secao">
        <div class="secao-header">
            <div class="secao-numero">03</div>
            <div class="secao-titulo-wrap">
                <h2>Melhorias de arquitetura</h2>
                <p>Facilitam manutenção futura — não há urgência, mas valem o esforço</p>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-melhoria">Melhoria</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Unificar as quatro implementações de máscara de CEP</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">utils.js</span>
                        <span class="arquivo-tag">cep-frete.js</span>
                        <span class="arquivo-tag">address-manager.js</span>
                        <span class="arquivo-tag">carrinho.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">A mesma lógica de formatação de CEP existe em quatro lugares diferentes. Qualquer correção precisa ser feita quatro vezes.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>A função <code>formatarCEP()</code> já existe no <code>utils.js</code>. Remova as outras três implementações e substitua todas as chamadas pela função centralizada do utils.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-melhoria">Melhoria</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Unificar as duas implementações de mostrarNotificacao()</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">notificacoes.js</span>
                        <span class="arquivo-tag">cardapio.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">Existem duas funções com o mesmo nome: a do <code>notificacoes.js</code> (sem suporte a tipo) e a do <code>cardapio.js</code> (com <code>tipo: 'success'|'error'|'info'</code>). A segunda sobrescreve a primeira — a versão do <code>notificacoes.js</code> nunca é usada.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Mova a versão completa (com suporte a tipo) para <code>notificacoes.js</code> e remova a do <code>cardapio.js</code>. Garanta que <code>notificacoes.js</code> carregue antes de <code>cardapio.js</code> no <code>index.html</code>.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-melhoria">Melhoria</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Unificar as duas validações de endereço</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">cep-frete.js</span>
                        <span class="arquivo-tag">address-manager.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao"><code>validarEnderecoCompleto()</code> exige CEP + Rua + Bairro + Número. <code>AddressManager.validar()</code> exige Rua + Cidade + Número. Para o mesmo formulário, dois critérios diferentes — qual vale?</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Decida quais campos são realmente obrigatórios e crie uma única função de validação em <code>utils.js</code>. Remova as duas implementações atuais e use a centralizada.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-melhoria">Melhoria</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Mover CSS injetado via JS para os arquivos corretos</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">notificacoes.js</span>
                        <span class="arquivo-tag">modal-carrinho.css</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao"><code>adicionarEstilosNotificacoes()</code> injeta ~150 linhas de CSS do carrinho no <code>&lt;head&gt;</code> em tempo de execução. Isso existe porque os estilos estavam "sumindo" e a solução foi injetá-los via JS.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Mova os estilos para <code>modal-carrinho.css</code>. Descubra por que estavam sumindo (provavelmente outro CSS com <code>!important</code> sobrescrevia). Remova a função <code>adicionarEstilosNotificacoes()</code> e sua chamada no <code>main.js</code>.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-melhoria">Melhoria</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Substituir sincronizarCEPComModalDados por callback de abertura de modal</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">address-manager.js</span>
                        <span class="arquivo-tag">modais.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">A função usa <code>setInterval</code> tentando a cada 200ms por até 2 segundos esperando o modal aparecer no DOM — frágil e ineficiente.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Adicione um callback opcional à função <code>abrirModal(id, callback)</code> em <code>modais.js</code>. Chame <code>AddressManager.init()</code> nesse callback ao abrir o modal de dados do cliente.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-melhoria">Melhoria</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Mover calcularDatasFornada() e mostrarNotificacao() para os arquivos corretos</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">cardapio.js</span>
                        <span class="arquivo-tag">fornada.js</span>
                        <span class="arquivo-tag">notificacoes.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao"><code>calcularDatasFornada()</code> está em <code>cardapio.js</code> mas pertence ao <code>fornada.js</code>. <code>mostrarNotificacao()</code> está em <code>cardapio.js</code> mas pertence ao <code>notificacoes.js</code>. Mistura de responsabilidades.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Mova cada função para seu arquivo natural. Atualize as exportações e confirme que a ordem de carregamento no <code>index.html</code> garante que as dependências chegam antes.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-melhoria">Melhoria</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Mover CSS fora do lugar em layout-base.css</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">layout-base.css</span>
                        <span class="arquivo-tag">modal-carrinho.css</span>
                        <span class="arquivo-tag">modal-recuperar-carrinho.css</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">O modal de recuperar carrinho e o <code>.campo-input-carrinho</code> estão definidos no <code>layout-base.css</code> — provavelmente foram colocados aí durante debug e nunca movidos.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Mova os estilos do modal para <code>modal-recuperar-carrinho.css</code> e o <code>.campo-input-carrinho</code> para <code>modal-carrinho.css</code>.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-melhoria">Melhoria</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Substituir manipulação de style inline por classes CSS em pagamento.js</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">pagamento.js</span>
                        <span class="arquivo-tag">modal-pagamento.css</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao"><code>selecionarPagamento()</code> altera <code>borderColor</code> e <code>background</code> via JS inline. A classe <code>.ativa</code> já existe no CSS mas nunca é adicionada pelo JS.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Substitua as manipulações inline por <code>elemento.classList.add('ativa')</code> e <code>elemento.classList.remove('ativa')</code>. O CSS já tem os estilos prontos — só precisam ser ativados.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-melhoria">Melhoria</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Remover HTML de resumo financeiro duplicado</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">carrinho.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao"><code>atualizarResumoFinanceiroCarrinho()</code> e <code>atualizarResumoPagamentoFinal()</code> geram blocos de HTML quase idênticos com dezenas de inline styles. São duas funções que vão se dessincronizar com o tempo.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Crie uma função <code>gerarHTMLResumo(dados)</code> que recebe os valores e retorna o HTML. As duas funções existentes chamam essa única função. Mova os estilos para o CSS.</p>
                </div>
            </div>
        </div>

    </section>

    <!-- FASE 4 -->
    <section class="secao">
        <div class="secao-header">
            <div class="secao-numero">04</div>
            <div class="secao-titulo-wrap">
                <h2>Limpeza — sem urgência</h2>
                <p>Código morto, comentários esquecidos e debug que pode ser removido</p>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-limpeza">Limpeza</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Remover ou desativar console.log excessivos</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">cardapio.js</span>
                        <span class="arquivo-tag">address-manager.js</span>
                        <span class="arquivo-tag">main.js</span>
                        <span class="arquivo-tag">state.js</span>
                        <span class="arquivo-tag">cep-frete.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">Há dezenas de <code>console.log</code> de debug em produção. Poluem o console do cliente, expõem dados internos e afetam marginalmente a performance.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Adicione um flag <code>window.DEBUG = false</code> no <code>config.js</code> e crie um wrapper: <code>const log = (...args) =&gt; window.DEBUG &amp;&amp; console.log(...args)</code>. Substitua todos os <code>console.log</code> por <code>log()</code>. Em dev você liga o flag; em produção fica desligado.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-limpeza">Limpeza</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Remover código morto e funções nunca chamadas</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">utils.js</span>
                        <span class="arquivo-tag">produto-modal.js</span>
                        <span class="arquivo-tag">address-manager.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">
                    Itens confirmados como código morto:
                    <br>• <code>calcularTotalCarrinho()</code> em utils.js — nunca chamada
                    <br>• <code>validarEmail()</code> em utils.js — nunca chamada
                    <br>• <code>window.ajustarAlinhamentoOpcionais = function(){}</code> — função vazia exportada
                    <br>• <code>this.enderecoAtual</code> em AddressManager — nunca lido, só escrito
                    <br>• <code>#modal-zoom-imagem</code> CSS — elemento não existe no HTML
                    <br>• Animação <code>modalEntrada</code> em overlay-modal.css — nunca usada
                </div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Delete cada item listado. O Git guarda o histórico se precisar recuperar algum.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-limpeza">Limpeza</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Remover comentários esquecidos de instruções de IA</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">state.js</span>
                        <span class="arquivo-tag">address-manager.js</span>
                        <span class="arquivo-tag">modal-informacoes-fornada.css</span>
                        <span class="arquivo-tag">dados-cliente.js</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">Comentários como <code>// ADICIONE ESTA LINHA:</code>, <code>// address-manager.js - Modificar função tornarCamposEditaveis()</code> e <code>/* No seu arquivo modal-informacoes-fornada.css */</code> são resquícios de instruções que uma IA deixou no código.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Busca global por esses padrões e delete. São inofensivos mas confusos para quem lê o código.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-limpeza">Limpeza</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Remover !important desnecessários em botoes.css</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">botoes.css</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">Há <code>!important</code> em <code>box-sizing</code>, <code>white-space</code>, <code>word-wrap</code> e nos overrides mobile — sinais de conflitos antigos que foram resolvidos na força. Se os conflitos foram corrigidos, eles não são mais necessários.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Remova os <code>!important</code> um a um, testando no navegador após cada remoção para confirmar que o visual não muda.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-limpeza">Limpeza</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Adicionar .gitignore e organizar pasta junk</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">.gitignore</span>
                        <span class="arquivo-tag">junk/</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">A pasta <code>junk/</code> contém arquivos de teste e backups que não deveriam estar no repositório. Não há <code>.gitignore</code> no projeto.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Crie um <code>.gitignore</code> com pelo menos: <code>junk/</code>, <code>*.bkp</code>, <code>node_modules/</code>. O conteúdo da pasta junk pode ser deletado ou movido para fora do repositório.</p>
                </div>
            </div>
        </div>

        <div class="card-tarefa">
            <div class="card-header">
                <span class="badge-prioridade badge-limpeza">Limpeza</span>
                <div class="card-titulo-wrap">
                    <div class="card-titulo">Remover meta tag theme-color duplicada</div>
                    <div class="card-arquivos">
                        <span class="arquivo-tag">index.html</span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="card-descricao">Existem duas tags <code>&lt;meta name="theme-color"&gt;</code> no head: uma com <code>#332616</code> e outra com <code>#2d3a27</code>. Apenas a primeira é lida pelo navegador.</div>
                <div class="card-acao">
                    <div class="card-acao-label">Como corrigir</div>
                    <p>Delete a segunda ocorrência. Decida qual cor é a correta para a barra do navegador no mobile.</p>
                </div>
            </div>
        </div>

    </section>

    <div class="aviso-final">
        <h3>Antes de começar qualquer refatoração</h3>
        <p>Faça um <code style="background:rgba(255,255,255,0.15); color:white;">git commit</code> com o estado atual funcionando. Cada fase deve terminar com o site testado e funcionando antes de avançar para a próxima. Comece sempre pelos itens da Fase 01.</p>
    </div>

</main>

<footer>
    Gerado em análise de código — Pão do Ciso © 2026
</footer>



</body></html>