<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>P√£o do Ciso - Card√°pio Digital</title>
    
    <!-- Estilos -->
    <link rel="stylesheet" href="css/01.default/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Favicon de teste -->
    <link rel="icon" type="image/png" href="img/logo-paodociso.png">
        
    <!-- Meta Tags para SEO e Redes Sociais -->
    <meta name="description" content="P√£es artesanais de fermenta√ß√£o natural, antepastos e produtos selecionados. Fa√ßa seu pedido para a pr√≥xima fornada do P√£o do Ciso.">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://cisotar.github.io/lojinha-testes/">
    <meta property="og:title" content="P√£o do Ciso | P√£es Artesanais">
    <meta property="og:description" content="P√£es de fermenta√ß√£o natural e antepastos artesanais. Fa√ßa seu pedido para a pr√≥xima fornada!">
    <meta property="og:image" content="https://cisotar.github.io/lojinha-testes/img/logo512x512.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://cisotar.github.io/lojinha-testes/">
    <meta property="twitter:title" content="P√£o do Ciso | P√£es Artesanais">
    <meta property="twitter:description" content="P√£es de fermenta√ß√£o natural e antepastos artesanais.">
    <meta property="twitter:image" content="https://cisotar.github.io/lojinha-testes/img/logo-paodociso.png">

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2d3a27">

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Usando './' para garantir que ele busque na pasta do projeto no GitHub Pages
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('Service Worker registrado com sucesso!', reg))
                    .catch(err => console.error('Falha ao registrar Service Worker:', err));
            });
        }
    </script>


</head>
<body>
    <!-- ===================== CABE√áALHO PRINCIPAL ===================== -->
    <header class="cabecalho-principal">
        <div class="cabecalho-container">
            
        <img src="img/logo-paodociso.png" alt="P√£o do Ciso" style="width:70px;height:70px;border-radius:50%;object-fit:cover;border:2px solid rgba(255,255,255,0.2);">
            
            <div class="cabecalho-info">
                <h1 class="titulo-cabecalho">P√£o do Ciso</h1>
                
                <div class="contatos-cabecalho">
                    <a href="https://instagram.com/paodociso" target="_blank" class="link-contato">
                        <i class="fab fa-instagram"></i> @paodociso
                    </a>
                    <a id="link-whatsapp-contato" href="#" target="_blank" class="link-contato">
                        <i class="fab fa-whatsapp"></i> <span id="texto-whatsapp-contato"></span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- ===================== BANNER DE FORNADA ===================== -->
    <div class="container">
        <div class="banner-fornada" onclick="abrirModal('modal-informacoes-fornada')">
            <div class="fornada-conteudo">
                <h2 id="texto-data-fornada" class="fornada-titulo">
                    <i class="fas fa-calendar-alt"></i> PR√ìXIMA FORNADA: CARREGANDO...
                </h2>
                <p id="texto-limite-pedido" class="fornada-subtitulo">
                    Pedidos at√©: carregando...
                </p>
            </div>
        </div>
    </div>

    <!-- ===================== √ÅREA PRINCIPAL DE PRODUTOS ===================== -->
    <main id="container-aplicativo" class="container">
        <!-- Os produtos ser√£o carregados dinamicamente pelo JavaScript -->
    </main>

    <!-- ===================== BARRA FIXA DO CARRINHO ===================== -->
    <div id="barra-carrinho" class="barra-carrinho-fixa" onclick="abrirModalCarrinho()">
        <div class="barra-esquerda">
            <span class="quantidade-carrinho" id="resumo-quantidade-carrinho">0 itens</span>
            <span class="valor-carrinho" id="resumo-total-carrinho">R$ 0,00</span>
        </div>
        <div class="barra-direita">
            CARRINHO DE COMPRAS <i class="fas fa-shopping-basket"></i>
        </div>
    </div>

    <!-- ===================== OVERLAY PARA MODAIS ===================== -->
    <div id="overlay-modal" class="overlay-modal" onclick="fecharTodosModais()"></div>

    <!-- ===================== MODAL 7: CONTINUAR COMPRA ===================== -->
    <div id="modal-recuperar-carrinho" class="modal">
        <div class="conteudo-modal" style="text-align: center; padding: 30px 25px;">
            <div style="background: #f0f8f0; border-radius: 50%; width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; border: 3px solid var(--verde-militar);">
                <i class="fas fa-shopping-basket" style="font-size: 2.5rem; color: var(--verde-militar);"></i>
            </div>
            
            <h3 class="titulo-modal" style="color: var(--marrom-cafe); margin-bottom: 15px;">
                CONTINUAR COMPRA ANTERIOR?
            </h3>
            
            <div class="texto-modal" style="margin: 20px 0; background: #f9f9f9; padding: 15px; border-radius: 10px; border: 1px solid #eee;">
                <p style="font-size: 1.1rem; margin-bottom: 10px;">
                    <i class="fas fa-exclamation-circle" style="color: var(--verde-militar); margin-right: 8px;"></i>
                    <strong style="color: var(--verde-militar);" id="quantidade-itens-recuperados">0</strong> 
                    <span style="color: var(--cinza-escuro);">itens no seu carrinho</span>
                </p>
                <p style="color: var(--cinza-escuro); font-size: 0.9rem; line-height: 1.4;">
                    O que voc√™ quer fazer com esses itens?
                </p>
            </div>
            
            <div class="botoes-recuperacao">
                <button id="botao-manter-carrinho" 
                        class="botao-acao"  
                        style="background: var(--verde-militar); color: white; border: none; padding: 16px; border-radius: 10px; font-weight: 700; font-size: 0.95rem; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%;"
                        onclick="fecharModal('modal-recuperar-carrinho'); mostrarNotificacao('Carrinho mantido! Continue sua compra.');">
                    <i class="fas fa-check-circle"></i> 
                    <span>MANTER ITENS<br><small style="font-size: 0.7rem; opacity: 0.9;">(Continuar comprando)</small></span>
                </button>
                
                <button id="botao-limpar-carrinho" 
                        class="botao-acao"
                        style="background: #f8f8f8; color: var(--cinza-escuro); border: 2px solid #ddd; padding: 16px; border-radius: 10px; font-weight: 700; font-size: 0.95rem; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%;"
                        onclick="limparCarrinhoRecuperado()">
                    <i class="fas fa-trash-alt"></i> 
                    <span>LIMPAR TUDO<br><small style="font-size: 0.7rem; opacity: 0.9;">(Come√ßar do zero)</small></span>
                </button>
            </div>
            
            <p style="font-size: 0.75rem; color: #888; margin-top: 25px; line-height: 1.4;">
                <i class="fas fa-info-circle" style="margin-right: 5px;"></i>
                Voc√™ pode remover itens um por um depois, se preferir.
            </p>
        </div>
    </div>

    <!-- ===================== MODAL 1: INFORMA√á√ïES DA FORNADA ===================== -->
    <div id="modal-informacoes-fornada" class="modal">
        <button class="botao-fechar-modal" onclick="fecharModal('modal-informacoes-fornada')">&times;</button>
        
        <div class="conteudo-modal-fornada">
            <div class="topo-informacao-fornada" style="text-align: center; margin-bottom: 15px;">
                <i class="fas fa-info-circle" style="font-size: 3rem; color: var(--verde-militar);"></i>
            </div>

            <h3 class="titulo-modal" style="text-align: center; margin-bottom: 20px; color: var(--marrom-cafe);">Informa√ß√µes Importantes</h3>

            <div class="destaque-fornada">
                <div class="bloco-data">
                    <span class="label-fornada">PR√ìXIMA FORNADA</span>
                    <span id="data-fornada-info" class="valor-fornada">Carregando...</span>
                </div>
                
                <div class="bloco-data">
                    <span class="label-fornada">PRAZO LIMITE</span>
                    <span id="limite-fornada-info" class="valor-fornada">Carregando...</span>
                </div>
            </div>

            <div class="lista-dicas-fornada">
                <div class="dica-fornada">
                    <i class="fa-solid fa-hands"></i>
                    <p><strong>Produ√ß√£o Artesanal:</strong> Nossos p√£es s√£o feitos com fermenta√ß√£o natural (Levain).</p>
                </div>
                
                <div class="dica-fornada">
                    <i class="fa-solid fa-seedling"></i>
                    <p><strong>Frescor Garantido:</strong> Tudo √© assado na manh√£ do dia da entrega.</p>
                </div>
                
                <div class="dica-fornada">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p><strong>Pedidos Limitados:</strong> Trabalhamos sob demanda com capacidade controlada.</p>
                </div>
            </div>

            <button class="botao-acao botao-verde-militar" style="width: 100%; margin-top: 10px;" onclick="fecharModal('modal-informacoes-fornada')">
                ENTENDI
            </button>
        </div>
    </div>   

    <!-- ===================== MODAL 2: DETALHES DO PRODUTO ===================== -->
        <div id="modal-produto" class="modal">
        <button class="botao-fechar-modal" onclick="fecharModal('modal-produto')">&times;</button>
        
        <div id="corpo-modal-produto" class="conteudo-modal-produto">
            <!-- Conte√∫do ser√° injetado dinamicamente -->
        </div>
        
        <div class="botoes-modal-produto">
            <!-- Bot√£o para adicionar e ir para o carrinho -->
            <button id="botao-adicionar-e-ir-para-carrinho" 
                    class="botao-acao botao-verde botao-avancar" 
                    onclick="adicionarEIrParaCarrinho()" 
                    style="display: none;">
                <i class="fas fa-shopping-basket"></i> VER CARRINHO
            </button>
            
            <!-- Bot√£o para adicionar e continuar comprando -->
            <button id="botao-adicionar-simples" 
                    class="botao-acao botao-bege" 
                    onclick="adicionarItemAoCarrinho()">
                <i class="fas fa-plus"></i> CONTINUAR COMPRANDO
            </button>
        </div>
    </div>
    
    <!-- ===================== MODAL 3: CARRINHO DE COMPRAS ===================== -->
    <div id="modal-carrinho" class="modal">
        <button class="botao-fechar-modal" onclick="fecharModal('modal-carrinho')">&times;</button>
        
        <div id="conteudo-carrinho" class="conteudo-modal-carrinho">
            <!-- Conte√∫do ser√° injetado dinamicamente pelo JavaScript -->
        </div>
    </div>

    <!-- ===================== MODAL 4: DADOS DO CLIENTE ===================== -->
    <div id="modal-dados-cliente" class="modal">
            <button class="botao-fechar-modal" onclick="fecharModal('modal-dados-cliente')">&times;</button>
            
            <div class="conteudo-modal">
                
                    
                    <h3 class="titulo-modal">Seus Dados</h3>
                    
                    <div class="formulario-dados">
                        <div class="grupo-campo">
                            <label for="nome-cliente" class="rotulo-campo obrigatorio">
                                NOME COMPLETO
                            </label>
                            <input type="text" 
                                id="nome-cliente" 
                                class="campo-entrada"
                                placeholder="Como podemos te chamar?"
                                autocomplete="name">
                        </div>
                        
                        <div class="grupo-campo">
                            <label for="whatsapp-cliente" class="rotulo-campo obrigatorio">
                                WHATSAPP
                            </label>
                            <input type="tel" 
                                id="whatsapp-cliente" 
                                class="campo-entrada"
                                placeholder="(11) 98765-4321"
                                autocomplete="tel">
                        </div>
                        
                        <div id="secao-endereco" style="display: none;">
                            <div class="separador-endereco"></div>
                            
                            <h4 class="subtitulo-endereco">
                                <i class="fas fa-map-marker-alt"></i> ENDERE√áO DE ENTREGA
                            </h4>
                            
                            <div class="grupo-campo">
                                <label for="codigo-postal-cliente" class="rotulo-campo obrigatorio">
                                    CEP
                                </label>
                                <input type="text" 
                                    id="codigo-postal-cliente" 
                                    class="campo-entrada"
                                    placeholder="00000-000"
                                    maxlength="9"
                                    oninput="formatarCodigoPostal(this)">
                                <small class="texto-ajuda">Digite 8 n√∫meros para buscar automaticamente</small>
                            </div>
                            
                            <div class="grupo-campo">
                                <label for="logradouro-cliente" class="rotulo-campo obrigatorio">
                                    RUA
                                </label>
                                <input type="text" 
                                    id="logradouro-cliente" 
                                    class="campo-entrada campo-leitura"
                                    placeholder="Ser√° preenchido automaticamente">
                            </div>
                            
                            <div class="grupo-duplo">
                                <div class="grupo-campo">
                                    <label for="bairro-cliente" class="rotulo-campo obrigatorio">
                                        BAIRRO
                                    </label>
                                    <input type="text" 
                                        id="bairro-cliente" 
                                        class="campo-entrada campo-leitura"
                                        placeholder="Ser√° preenchido automaticamente">
                                </div>
                                
                                <div class="grupo-campo">
                                    <label for="cidade-cliente" class="rotulo-campo">
                                        CIDADE/UF
                                    </label>
                                    <input type="text" 
                                        id="cidade-cliente" 
                                        class="campo-entrada campo-leitura"
                                        placeholder="Ser√° preenchido automaticamente">
                                </div>
                            </div>
                            
                            <div class="grupo-duplo">
                                <div class="grupo-campo">
                                    <label for="numero-residencia-cliente" class="rotulo-campo obrigatorio">
                                        N√öMERO
                                    </label>
                                    <input type="text" 
                                        id="numero-residencia-cliente" 
                                        class="campo-entrada"
                                        placeholder="123"
                                        autocomplete="address-line2">
                                </div>
                                
                                <div class="grupo-campo">
                                    <label for="complemento-residencia-cliente" class="rotulo-campo">
                                        COMPLEMENTO
                                    </label>
                                    <input type="text" 
                                        id="complemento-residencia-cliente" 
                                        class="campo-entrada"
                                        placeholder="Apto 45, Bloco B"
                                        autocomplete="address-line3">
                                </div>
                            </div>
                            
                            <div class="grupo-campo">
                                <label for="ponto-referencia-entrega" class="rotulo-campo">
                                    PONTO DE REFER√äNCIA
                                </label>
                                <input type="text" 
                                    id="ponto-referencia-entrega" 
                                    class="campo-entrada"
                                    placeholder="Ex: Pr√≥ximo ao mercado, port√£o azul">
                            </div>
                            
                            <div id="informacao-frete" class="card-informacao-frete" style="display: none;">
                                <i class="fas fa-motorcycle"></i>
                                <div class="info-frete-conteudo">
                                    <span class="info-frete-titulo">FRETE CALCULADO:</span>
                                    <span id="valor-frete" class="info-frete-valor">R$ 0,00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="botoes-acao">
                        <button id="botao-prosseguir-pagamento" 
                                class="botao-acao botao-verde-militar"
                                onclick="validarDadosCliente()">
                            ESCOLHER PAGAMENTO <i class="fas fa-credit-card"></i>
                        </button>
                        
                        <button class="botao-acao botao-bege"
                                onclick="fecharModal('modal-dados-cliente'); abrirModal('modal-carrinho');">
                            <i class="fas fa-arrow-left"></i> VOLTAR √Ä CESTA
                        </button>
                    </div>

                </div> 
        </div>

    <!-- ===================== MODAL 5: FORMA DE PAGAMENTO ===================== -->
    <div id="modal-pagamento" class="modal">
        <button class="botao-fechar-modal" onclick="fecharTodosModais()">&times;</button>
        
        <div class="conteudo-modal" style="padding: 20px;">
            <h3 style="margin-bottom: 25px; color: var(--marrom-cafe); text-align: center; font-weight: 900; text-transform: uppercase; letter-spacing: 1px;">Forma de Pagamento</h3>
            
            <!-- Resumo do Pedido -->
            <div id="resumo-final-pedido-pagamento"></div>
            
            <!-- Op√ß√µes de Pagamento -->
            <div class="opcoes-pagamento">
                <!-- Op√ß√£o 1: PIX -->
                <div class="opcao-pagamento" onclick="selecionarPagamento('PIX', this)">
                    <span class="opcao-recomendado">RECOMENDADO</span>
                    
                    <div class="opcao-cabecalho">
                        <i class="fa-brands fa-pix"></i>
                        <span class="opcao-titulo">PIX</span>
                    </div>
                    
                    <div class="opcao-conteudo">
                        <div class="pix-valor">
                            VALOR: <span id="valor-pix">R$ 0,00</span>
                        </div>
                        
                        <div class="pix-qrcode">
                            <img src="img/qrcode-pix.png" alt="QR Code PIX" class="pix-qrcode-img">
                            <p class="pix-legenda">CLIQUE PARA COPIAR A CHAVE:</p>
                        </div>
                        
                        <div class="pix-chave" onclick="copiarChavePix()">
                            <span id="texto-chave-pix"></span>
                            <i class="far fa-copy"></i>
                        </div>
                        
                        <div id="mensagem-copiado" class="mensagem-sucesso">
                            ‚úÖ Chave PIX copiada!
                        </div>
                    </div>
                </div>
                
                <!-- Op√ß√£o 2: Cart√£o -->
                <div class="opcao-pagamento" onclick="selecionarPagamento('Cart√£o', this)">
                    <div class="opcao-cabecalho">
                        <i class="fas fa-credit-card"></i>
                        <span class="opcao-titulo">CART√ÉO (CR√âDITO/D√âBITO)</span>
                    </div>
                    
                    <div class="opcao-conteudo">
                        <p class="opcao-descricao">
                            Pague por aproxima√ß√£o na entrega ou pe√ßa o link via WhatsApp.
                        </p>
                    </div>
                </div>
                
                <!-- Op√ß√£o 3: Dinheiro -->
                <div class="opcao-pagamento" onclick="selecionarPagamento('Dinheiro', this)">
                    <div class="opcao-cabecalho">
                        <i class="fas fa-money-bill-wave"></i>
                        <span class="opcao-titulo">DINHEIRO</span>
                    </div>
                    
                    <div class="opcao-conteudo">
                        <p class="opcao-descricao">Pagamento em esp√©cie no ato da entrega.</p>
                        <p class="opcao-observacao">
                            <i class="fas fa-info-circle"></i> Tenha o troco preparado, por favor.
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- Bot√µes de A√ß√£o -->
            <!-- Bot√µes conferir se essa div imediatamente abaixo pode ser removida para o css gerir -->
            <div class="botoes-acao" style="display: flex; flex-direction: column; gap: 10px;">
                <button id="botao-finalizar-pedido" 
                        class="botao-acao botao-verde-militar"
                        onclick="finalizarPedido()"
                        disabled
                        style="background-color: var(--verde-militar); color: var(--branco); border: none; padding: 14px 20px; border-radius: 8px; font-weight: 700; font-size: 0.9rem; cursor: pointer; text-transform: uppercase; letter-spacing: 0.5px; display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%;">
                    FINALIZAR PEDIDO <i class="fab fa-whatsapp"></i>
                </button>
                
                <button class="botao-acao botao-bege"
                        onclick="fecharModal('modal-pagamento'); abrirModal('modal-dados-cliente');"
                        style="background-color: var(--bege-escuro); color: var(--marrom-cafe); border: 1px solid var(--marrom-detalhe); padding: 14px 20px; border-radius: 8px; font-weight: 700; font-size: 0.9rem; cursor: pointer; text-transform: uppercase; letter-spacing: 0.5px; display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%;">
                    <i class="fas fa-arrow-left"></i> VOLTAR PARA MEUS DADOS
                </button>
            </div>
        </div>
    </div>

    <!-- ===================== MODAL 6: CONFIRMA√á√ÉO DE SUCESSO ===================== -->
    <div id="modal-sucesso" class="modal">
        <div class="conteudo-modal-sucesso">
            <div class="icone-sucesso">
                <i class="fas fa-check-circle"></i>
            </div>
            
            <h3 class="titulo-sucesso">PEDIDO ENVIADO COM SUCESSO!</h3>
            
            <div class="mensagem-sucesso">
                <p>‚úÖ Seu pedido foi registrado em nosso sistema.</p>
                <p>üì± O WhatsApp deve abrir em uma nova aba em instantes...</p>
                <p>üí¨ Caso n√£o tenha aberto, use o bot√£o abaixo:</p>
            </div>
            
            <div class="detalhes-pedido">
                <div class="detalhe-item">
                    <i class="fas fa-receipt"></i>
                    <span>N¬∫ do Pedido: <strong id="numero-pedido">#0001</strong></span>
                </div>
                <div class="detalhe-item">
                    <i class="fas fa-clock"></i>
                    <span>Hor√°rio: <strong id="horario-pedido">00:00</strong></span>
                </div>
            </div>
            
            <button id="botao-reenviar-whatsapp" 
                    class="botao-acao botao-verde-militar" 
                    onclick="reenviarPedidoWhatsapp()"
                    style="margin-bottom: 15px; width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px;">
                REENVIAR PEDIDO PELO WHATSAPP <i class="fab fa-whatsapp"></i>
            </button>

            <button id="botao-fechar-sucesso" 
                    class="botao-acao botao-contorno"
                    onclick="reiniciarFluxoCompra()"
                    style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px;">
                <i class="fas fa-home"></i> VOLTAR AO CARD√ÅPIO
            </button>
            
            <p class="texto-agradecimento">
                Obrigado por escolher o P√£o do Ciso! ü•ñ
            </p>
        </div>
    </div>


    <!-- ===================== RODAP√â ===================== -->
    <footer class="rodape">
        <div class="container">
            <p class="texto-rodape">
                <i class="fas fa-heart"></i> Feito com carinho por P√£o do Ciso
            </p>
            <p class="copyright">
                ¬© 2026 P√£o do Ciso - Todos os direitos reservados
            </p>
        </div>
    </footer>

<!-- ===================== SCRIPTS JAVASCRIPT ===================== -->
<!-- ORDEM CORRETA DE CARREGAMENTO -->
    <script src="js/config.js"></script>
    <script src="js/dados.js"></script>
    <script src="js/state.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/modais.js"></script>
    <script src="js/notificacoes.js"></script>
    <script src="js/fornada.js"></script>
    <script src="js/cardapio.js"></script>
    <script src="js/opcionais.js"></script>
    <script src="js/produto-modal.js"></script>
    <script src="js/carrinho.js"></script>
    <script src="js/dados-cliente.js"></script>
    <script src="js/cep-frete.js"></script>     
    <script src="js/pagamento.js"></script>
    <script src="js/envio.js"></script>
    <script src="js/address-manager.js"></script>
    <script src="js/recuperacao-carrinho.js"></script>
    <script src="js/main.js"></script>
    </body>
</html>